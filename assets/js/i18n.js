
const translations = {
    fr: {
        // Navigation
        "nav_home": "Accueil",
        "nav_expertise": "Expertise",
        "nav_about": "√Ä Propos",
        "nav_portfolio": "Portfolio",
        "nav_blog": "Blog & Insights",
        "nav_contact": "Contact",
        "nav_lets_talk": "Parlons-en", // Let's Talk

        // Common
        "read_more": "Lire la suite",
        "view_all": "Voir tout",
        
        // Headlines (Index)
        "hero_title": "Communication Visuelle & Storytelling d'Impact",
        "hero_subtitle": "Je transforme vos messages complexes en histoires visuelles claires et engageantes.",
        "download_cv": "T√©l√©charger CV",
        "hero_intro_p": "Expert en Communication Visuelle & Storytelling d'Impact. Depuis 7+ ans, j'accompagne institutions, ONG et projets d'impact pour cr√©er des r√©cits puissants qui transforment les actions de terrain en messages clairs, cr√©dibles et m√©morables.",
        "hero_hi": "BONJOUR, JE SUIS<br> WILSON SAINTELUS",
        "hero_bottom_p": "Je ne cr√©e pas du contenu pour √™tre vu. Je construis des r√©cits pour faire comprendre, convaincre et mobiliser. Communication Strat√©gique ¬∑ R√©alisation ¬∑ Storytelling Institutionnel",
        "my_portfolio": "Mon Portfolio",
        
        // Blog
        "blog_title": "Blog & Insights",
        "blog_breadcrumb_home": "Accueil",
        "blog_breadcrumb_blog": "Blog",
        "blog_read_more": "Lire la suite",
        
        // About Page
        "about_banner_subtitle": "Le Strat√®ge",
        "about_banner_title": "√Ä Propos de Moi",
        "about_banner_tagline": "R√©alisateur | Responsable Communication & Contenu Digital | Producteur Vid√©o | Strat√®ge Digital",
        "about_view_portfolio": "Voir le Portfolio",
        
        // About Sections
        "about_profile_subtitle": "Profil",
        "about_profile_title": "R√©sum√© Professionnel",
        "about_career_subtitle": "Carri√®re",
        "about_career_title": "Exp√©rience Professionnelle",
        "about_capabilities_subtitle": "Comp√©tences",
        "about_capabilities_title": "Comp√©tences & Expertise",
        "about_learning_subtitle": "Formation",
        "about_learning_title": "√âducation & Certifications",
        "about_global_subtitle": "Global",
        "about_global_title": "Langues",
        
        // Portfolio Page
        "portfolio_banner_subtitle": "Le Cr√©ateur",
        "portfolio_banner_title": "Mon Portfolio",
        "portfolio_banner_tagline": "Une s√©lection de mes travaux √† travers divers formats, con√ßus pour engager, informer et inspirer.",
        "portfolio_get_quote": "Obtenir un Devis",
        "portfolio_subtitle": "Portfolio",
        "portfolio_title": "Mes Travaux R√©cents",
        "portfolio_view_all": "Voir Tous les Services",
        
        // Footer
        "footer_title": "Travaillons Ensemble",
        "footer_email_me": "M'envoyer un Email",
        "footer_whatsapp": "WhatsApp",
        "footer_expertise_title": "Expertise",
        "footer_expertise_1": "Communication Institutionnelle",
        "footer_expertise_2": "Storytelling & Strat√©gie",
        "footer_expertise_3": "Production Audiovisuelle",
        "footer_expertise_4": "Croissance Digitale",
        "footer_location": "Port-au-Prince, Ha√Øti",
        "footer_connect": "Connectez-vous avec moi",
        "footer_back_to_top": "Retour en Haut",
        
        // Contact Section
        "contact_phone": "T√©l√©phone",
        "contact_email": "Email",
        "contact_country": "Pays",
        "contact_available": "Disponible - 20 Heures / Semaine",
        "contact_active_status": "Statut Actif",
        "contact_active_label": "Actif",
        "contact_form_title": "Travaillons ensemble !",
        "contact_form_name": "Nom",
        "contact_form_email": "Email*",
        "contact_form_phone": "T√©l√©phone",
        "contact_form_message": "Parlez-nous de votre projet *",
        "contact_form_submit": "Prendre Contact",
        
        // Hire Me Section
        "hire_me_greeting": "Bonjourüëã je suis disponible pour du travail freelance",
        "hire_me_btn": "Engagez-moi maintenant",
        
        // Testimonials
        "testi_cherubin_text": "¬´ Wilson Saintelus est un vid√©aste d‚Äôun grand professionnalisme et d‚Äôune cr√©ativit√© remarquable. Il poss√®de une v√©ritable capacit√© √† comprendre une id√©e et √† mobiliser les bons outils pour la transformer en visuels puissants et impactants. Son sens du d√©tail, alli√© √† sa t√©nacit√©, fait de lui un professionnel promis √† de grandes r√©ussites. ¬ª",
        "testi_cherubin_role": "Collaboration : Production Vid√©o",

        // Services
        "services_subtitle": "Mon Expertise",
        "services_title": "Ce que je fais",
        "srv_av_title": "PRODUCTION AUDIOVISUELLE & POST-PRODUCTION",
        "srv_av_desc": "Ex√©cution experte en Montage Vid√©o, VFX & Compositing, Motion Graphics, √âtalonnage, Cin√©matographie et Sound Design.",
        "srv_strat_title": "COMMUNICATION STRAT√âGIQUE & CONTENU",
        "srv_strat_desc": "D√©veloppement de Strat√©gie de Communication, Architecture de Storytelling Visuel, Journalisme d'Investigation, D√©veloppement de Marque et Messages Institutionnels.",
        "srv_dig_title": "M√âDIAS DIGITAUX & SOCIAUX",
        "srv_dig_desc": "Strat√©gie de Croissance de Plateforme (TikTok, Facebook, YouTube), Optimisation de Contenu, Gestion de Communaut√© et SEO.",
        "srv_prod_title": "GESTION DE PRODUCTION",
        "srv_prod_desc": "Gestion de Projet, Planification Budg√©taire, Allocation de Ressources, Leadership d'√âquipe et Conception de Pipeline de Production.",

        // About (Index)
        "idx_about_subtitle": "√Ä Propos de Moi",
        "idx_about_title": "Une Expertise de Terrain",
        "idx_about_desc": "<strong>R√©alisateur Audiovisuel & Strat√®ge Digital | 7+ ans de leadership</strong><br><br>J'ai fait passer une plateforme de divertissement de 0 √† 16K abonn√©s et 1,8M de vues en 60 jours. J'ai dirig√© le journalisme vid√©o d'investigation de la plus haute qualit√© en Ha√Øti chez AyiboPost tout en √©tant pionnier des standards VFX/motion graphics pour le paysage m√©diatique national.<br><br><strong>Comp√©tences Cl√©s :</strong><br>R√©alisation documentaire | VFX/compositing avanc√© | Architecture de communication institutionnelle | Ing√©nierie de croissance de plateforme | Storytelling humanitaire<br><br><strong>R√©alisation Cl√© :</strong><br>Modernisation de l'infrastructure de communication institutionnelle tout en maintenant des standards √©thiques, renfor√ßant la cr√©dibilit√© organisationnelle dans le secteur humanitaire ha√Øtien.<br><br><strong>Outils & Technologies :</strong><br>Suite Adobe (Premiere Pro, After Effects, Photoshop, Illustrator), DaVinci Resolve, Meta Business Suite, Asana, WordPress.",
        "idx_about_btn": "Contactez-moi",

        // Impact
        "impact_subtitle": "Parcours",
        "impact_title": "Impact & R√©sultats",
        "stat_exp_val": "7+ ANS",
        "stat_exp_desc": "d'exp√©rience en r√©alisation & production vid√©o",
        "stat_film_val": "10+ FILMS",
        "stat_film_desc": "films institutionnels produits",
        "stat_shows_val": "5+ √âMISSIONS",
        "stat_shows_desc": "√©missions majeures g√©r√©es",
        "stat_tiktok_val": "16K EN 2 MOIS",
        "stat_tiktok_desc": "abonn√©s TikTok ¬∑ 1,8M vues cumul√©es",
        "stat_fb_val": "350K+ ABONN√âS",
        "stat_fb_desc": "sur 5 pages Facebook",
        "stat_yt_val": "4K+ ABONN√âS",
        "stat_yt_desc": "croissance cha√Æne YouTube",
        
        // About Page Lists
        "exp_sd_li1": "<strong>Leadership Strat√©gique :</strong> Con√ßu et ex√©cut√© une strat√©gie de communication globale int√©grant plateformes digitales, contenu audiovisuel et engagement communautaire.",
        "exp_sd_li2": "<strong>Standards & √âthique :</strong> √âtabli des standards cr√©atifs et √©ditoriaux, assurant un storytelling √©thique dans des contextes m√©dicaux sensibles.",
        "exp_sd_li3": "<strong>Impact :</strong> Renforc√© la visibilit√© de l'h√¥pital aupr√®s des partenaires internationaux. Produit des supports √† fort impact pour les campagnes de sensibilisation.",
        
        "exp_ay_li1": "<strong>Storytelling Visuel :</strong> Produit des enqu√™tes vid√©o long format couvrant des enjeux sociaux, politiques et humanitaires.",
        "exp_ay_li2": "<strong>Production Avanc√©e :</strong> Dirig√© l'int√©gration des effets visuels, compositing fond vert et motion graphics sophistiqu√©s.",
        "exp_ay_li3": "<strong>Commercial & Documentaire :</strong> Livr√© des productions vid√©o premium pour campagnes commerciales, vid√©os explicatives et documentaires d'investigation.",
        "exp_ay_li4": "<strong>Innovation :</strong> Pionnier des techniques VFX avanc√©es adapt√©es au paysage m√©diatique ha√Øtien. √âtabli des pipelines de production professionnels aux standards internationaux.",
        
        // Fun Facts
        "fact_proj_desc": "Projets R√©alis√©s",
        "fact_client_desc": "Clients Satisfaits",

        // About Page Content
        "about_summary_text": "<strong>R√©alisateur Audiovisuel & Strat√®ge Digital | 7+ ans de leadership</strong><br>J'ai fait passer une plateforme de divertissement de 0 √† 16K abonn√©s et 1,8M de vues en 60 jours. J'ai dirig√© le journalisme vid√©o d'investigation de la plus haute qualit√© en Ha√Øti chez AyiboPost tout en √©tant pionnier des standards VFX/motion graphics pour le paysage m√©diatique national.",
        "about_comp_1": "R√©alisation Documentaire",
        "about_comp_2": "VFX/Compositing Avanc√©",
        "about_comp_3": "Architecture de Communication Institutionnelle",
        "about_comp_4": "Ing√©nierie de Croissance de Plateforme",
        "about_comp_5": "Storytelling Humanitaire",
        
        "exp_sd_title": "Responsable Communication & Contenu Digital",
        "exp_sd_date": "H√¥pital Saint Damien | Oct 2024 ‚Äî Jan 2026",
        "exp_sd_desc": "Promu Responsable Communication en 12 mois. Reconstruction de l'infrastructure de communication institutionnelle du principal h√¥pital p√©diatrique d'Ha√Øti, gestion de la transformation digitale, production audiovisuelle et engagement des parties prenantes.",
        
        "exp_ayibo_title": "Directeur Vid√©o | Journaliste Vid√©o",
        "exp_ayibo_date": "AyiboPost / AyiboStudio | Nov 2020 ‚Äî D√©c 2024",
        "exp_ayibo_desc": "Direction de la production audiovisuelle haut de gamme pour la premi√®re plateforme de journalisme d'investigation d'Ha√Øti. Pionnier de l'int√©gration VFX/motion graphics et r√©alisation de documentaires long format.",
        
        "skill_av_title": "Production Audiovisuelle & Post-Production",
        "skill_av_desc": "Niveau Expert : Montage Vid√©o Avanc√©, VFX & Compositing, Motion Graphics, √âtalonnage, Cin√©matographie, Sound Design, R√©alisation Documentaire.",
        "skill_av_tools": "<strong>Outils :</strong> Adobe Premiere Pro (Expert), After Effects (Expert), DaVinci Resolve (Expert), Photoshop, Illustrator.",
        
        "skill_strat_title": "Communication Strat√©gique & Digital",
        "skill_strat_desc": "D√©veloppement de Strat√©gie de Communication, Architecture de Storytelling Visuel, Journalisme d'Investigation, D√©veloppement de Marque, Engagement des Parties Prenantes.",
        "skill_strat_growth": "<strong>Croissance :</strong> Strat√©gie de Croissance de Plateforme (TikTok, Facebook, Instagram, YouTube), Optimisation de Contenu, SEO, Gestion de Communaut√©.",
        
        "edu_1": "<strong>Sp√©cialisation Marketing Digital Avanc√©</strong> - LinkedIn Learning (2023)",
        "edu_2": "<strong>Certification Production Film & Vid√©o</strong> - LinkedIn Learning (2023)",
        "edu_3": "<strong>Communication & Marketing Int√©gr√©</strong> - IE Business School (2022)",
        "edu_4": "<strong>Certification Marketing Digital</strong> - Meta (2021)",
        "edu_5": "<strong>Ma√Ætrise des Techniques Cin√©matographiques</strong> - Hollywood Camera Work (2019)",
        "edu_6": "<strong>Licence en Informatique</strong> - University of the People (En Cours)",
        
        "lang_1": "Fran√ßais (Courant/Maternel)",
        "lang_2": "Cr√©ole Ha√Øtien (Maternel)",
        "lang_3": "Anglais (Comp√©tence Professionnelle)",

        // Portfolio Categories
        "cat_explainer": "Vid√©os Explicatives",
        "cat_commercial": "Publicit√©s & Commerciaux",
        "cat_short": "Courts M√©trages",
        "cat_music": "Vid√©os Musicales",
        "cat_doc": "Documentaires",
        "cat_corp": "Films d'Entreprise"
    }
};

let currentLang = 'en';

document.addEventListener('DOMContentLoaded', () => {
    // 1. Initialize logic: Cache original text
    cacheOriginalText();

    // 2. Determine initial language
    const savedLang = localStorage.getItem('i18n_lang');
    const browserLang = navigator.language || navigator.userLanguage;
    
    if (savedLang) {
        currentLang = savedLang;
    } else if (browserLang && browserLang.toLowerCase().startsWith('fr')) {
        currentLang = 'fr';
    }

    // 3. Apply language
    setLanguage(currentLang);


    // 4. Bind Toggle Button
    const toggleBtn = document.getElementById('langToggle');
    if (toggleBtn) {
        toggleBtn.addEventListener('click', (e) => {
            e.preventDefault();
            toggleLanguage();
        });
    }

    // 5. Load Blog Posts (if on blog page)
    const blogContainer = document.querySelector('.blog-items'); // Target container
    if (blogContainer && window.location.pathname.includes('blog.html')) {
        loadBlogPosts(currentLang);
    }
});

function cacheOriginalText() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(el => {
        if (!el.hasAttribute('data-original-text')) {
            if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                el.setAttribute('data-original-text', el.placeholder);
            } else if (el.hasAttribute('data-i18n-html')) {
                el.setAttribute('data-original-text', el.innerHTML);
            } else if (el.querySelector('*') && el.childNodes.length > 0) {
                let found = false;
                for (const node of el.childNodes) {
                    if (node.nodeType === Node.TEXT_NODE && node.nodeValue.trim() !== '') {
                        el.setAttribute('data-original-text', node.nodeValue);
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    el.setAttribute('data-original-text', el.innerHTML);
                }
            } else {
                el.setAttribute('data-original-text', el.innerHTML);
            }
        }
    });
}


function toggleLanguage() {
    currentLang = (currentLang === 'en') ? 'fr' : 'en';
    setLanguage(currentLang);
}

function setLanguage(lang) {
    localStorage.setItem('i18n_lang', lang);
    const elements = document.querySelectorAll('[data-i18n]');
    
    elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        
        if (lang === 'fr' && translations.fr[key]) {
            // Apply French
            updateElementText(el, translations.fr[key]);
        } else {
            // Restore English (Original)
            const original = el.getAttribute('data-original-text');
            if (original) {
                updateElementText(el, original);
            }
        }
    });

    // Update Toggle Button Text
    const toggleBtn = document.getElementById('langToggle');
    if (toggleBtn) {
        toggleBtn.textContent = (lang === 'en') ? 'FR' : 'EN';
    }

    // Reload Blog Posts if necessary (to translate non-i18n dynamic content if we had any)
    const blogContainer = document.querySelector('.blog-items');
    if (blogContainer && window.location.pathname.includes('blog.html')) {
        // Clear and reload to apply potentially localized data if backend supported it
        // For now, our JSON is static, but good practice.
        blogContainer.innerHTML = ''; 
        loadBlogPosts(lang);
    }
}

async function loadBlogPosts(lang) {
    try {
        const response = await fetch('blog-posts.json');
        const posts = await response.json();
        const container = document.querySelector('.blog-items');
        
        if (!container) return;

        // This example assumes JSON has "title_fr", "description_fr" etc if we wanted dual language JSON.
        // Since we only have static JSON now, we just render it. 
        // Real-world would pick fields based on 'lang'.
        
        container.innerHTML = posts.map(post => `
            <div class="item">
                <div class="thumb">
                    <a href="${post.link}">
                        <img src="${post.image}" alt="${post.title}">
                    </a>
                </div>
                <div class="info">
                    <div class="meta">
                        <ul>
                            <li><i class="fas fa-calendar-alt"></i> ${post.date}</li>
                            <li><i class="fas fa-user"></i> By ${post.author}</li>
                        </ul>
                    </div>
                    <h4>
                        <a href="${post.link}">${post.title}</a>
                    </h4>
                    <p>
                        ${post.description}
                    </p>
                    <a class="btn-more" href="${post.link}">Read More <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        `).join('');
        
    } catch (error) {
        console.error('Error loading blog posts:', error);
    }
}

function updateElementText(el, text) {
    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
        el.placeholder = text;
    } else if (el.hasAttribute('data-i18n-html')) {
        el.innerHTML = text;
    } else if (el.querySelector('*') && el.childNodes.length > 0) {
        let textNodeFound = false;
        for (const node of el.childNodes) {
            if (node.nodeType === Node.TEXT_NODE && node.nodeValue.trim() !== '') {
                node.nodeValue = text;
                textNodeFound = true;
                break;
            }
        }
        if (!textNodeFound) {
            el.innerHTML = text;
        }
    } else {
        el.innerHTML = text;
    }
}
